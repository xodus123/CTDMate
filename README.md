# CTDMate

**AI ê¸°ë°˜ CTD(Common Technical Document) ë¬¸ì„œ ìë™ ìƒì„± ë° ê²€ì¦ ì‹œìŠ¤í…œ**

CTDMateëŠ” ì˜ì•½í’ˆ í—ˆê°€ ì‹ ì²­ì— í•„ìš”í•œ CTD ë¬¸ì„œì˜ **ìƒì„±, íŒŒì‹±, ê²€ì¦**ì„ ìë™í™”í•˜ëŠ” ì—”ë“œíˆ¬ì—”ë“œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
ReAct AI ì—ì´ì „íŠ¸, RAG(ê²€ìƒ‰ì¦ê°•ìƒì„±), LLMì„ ê²°í•©í•˜ì—¬ ë¬¸ì„œ ì‘ì„± ì‹œê°„ì„ ë‹¨ì¶•í•˜ê³  íœ´ë¨¼ ì—ëŸ¬ë¥¼ ê°ì†Œì‹œí‚µë‹ˆë‹¤.

[![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.118+-green.svg)](https://fastapi.tiangolo.com/)
[![License](https://img.shields.io/badge/License-Educational-yellow.svg)]()

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. ì§€ëŠ¥í˜• ëª¨ë“œ ìë™ ê°ì§€
AIê°€ ë‹¤ì¸µì  ë¶„ì„ì„ í†µí•´ ì‘ì—… ìœ í˜•ì„ ìë™ìœ¼ë¡œ íŒë‹¨í•©ë‹ˆë‹¤.

**ê°ì§€ ì•Œê³ ë¦¬ì¦˜ (3ë‹¨ê³„):**
1. **íŒŒì¼ëª… í‚¤ì›Œë“œ**:<br>"final", "CTD", "ì™„ì„±" â†’ ê²€ì¦ <br> "data", "ì‹¤í—˜", "draft" â†’ ìƒì„±
2. **íŒŒì¼ ë‚´ìš© ë¶„ì„**: "êµ­ì œê³µí†µê¸°ìˆ ë¬¸ì„œ", "ëª©ì°¨", "1ë¶€/2ë¶€/3ë¶€" ë“± CTD êµ¬ì¡° í‚¤ì›Œë“œ ê°ì§€
3. **í™•ì¥ì ê¸°ë°˜**: <br>PDF â†’ ê²€ì¦ ëª¨ë“œ <br>Excel/CSV â†’ ìƒì„± ëª¨ë“œ
4. **LLM ë¶„ì„** (ë¶ˆí™•ì‹¤í•œ ê²½ìš°): Llama 3.2-3Bê°€ ë‚´ìš© ì§ì ‘ ë¶„ì„

**ê²°ê³¼:**
- **ìƒì„± ëª¨ë“œ**: Excel/CSV ì›ì‹œ ë°ì´í„° â†’ CTD ë¬¸ì„œ ìë™ ìƒì„±
- **ê²€ì¦ ëª¨ë“œ**: PDF ì™„ì„± ë¬¸ì„œ â†’ ICH ê·œì • ì¤€ìˆ˜ ê²€ì¦

### 2. ReAct AI ì—ì´ì „íŠ¸
ìŠ¤ìŠ¤ë¡œ ì¶”ë¡ í•˜ê³  í–‰ë™í•˜ëŠ” AI ì—ì´ì „íŠ¸ê°€ ë³µì¡í•œ ì›Œí¬í”Œë¡œìš°ë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

```
ì‚¬ìš©ì ì…ë ¥ â†’ AI ë¶„ì„ â†’ ë„êµ¬ ì„ íƒ â†’ ì‹¤í–‰ â†’ ê²°ê³¼ ìƒì„±
```

### 3. RAG ê¸°ë°˜ ê·œì • ê²€ì¦
- ICH/MFDS ê·œì • ë¬¸ì„œë¥¼ ë²¡í„° DBì— ì €ì¥
- ì—…ë¡œë“œëœ ë¬¸ì„œì™€ ê·œì •ì„ ì˜ë¯¸ ê¸°ë°˜ìœ¼ë¡œ ë¹„êµ
- ëˆ„ë½/ìœ„ë°˜ ì‚¬í•­ì„ ìë™ìœ¼ë¡œ íƒì§€í•˜ê³  ê°œì„  ì œì•ˆ

### 4. ì›¹ UI
- íŒŒì¼ ì—…ë¡œë“œë§Œìœ¼ë¡œ ëª¨ë“  ì‘ì—… ìˆ˜í–‰
- ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í™•ì¸
- PDF ë‹¤ìš´ë¡œë“œ ë° ë¯¸ë¦¬ë³´ê¸°

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ì›¹ UI (FastAPI)                â”‚
â”‚     http://localhost:8000             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CTDMate ë©”ì¸ ì‹œìŠ¤í…œ                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ë¼ìš°í„° (router.py)                          â”‚   â”‚
â”‚  â”‚  - íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬                           â”‚   â”‚
â”‚  â”‚  - CTDAgent í˜¸ì¶œ                             â”‚   â”‚
â”‚  â”‚  - ê²°ê³¼ ë°˜í™˜                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Tools                                       â”‚   â”‚
â”‚  â”‚  - Upstage Document Parser (íŒŒì‹±)            â”‚   â”‚
â”‚  â”‚  - RAG Validator (ê·œì • ê²€ì¦)                  â”‚   â”‚
â”‚  â”‚  - Solar Generator (ë¬¸ì„œ ìƒì„±)                â”‚   â”‚
â”‚  â”‚  - PDF Generator (PDF ë³€í™˜)                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CTDAgent (ReAct ì—ì´ì „íŠ¸)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  agent.py (ë©”ì¸ ë¡œì§)                         â”‚   â”‚
â”‚  â”‚  - ëª¨ë“œ ìë™ ê°ì§€                             â”‚   â”‚
â”‚  â”‚  - ReAct ë£¨í”„ (Thought â†’ Action â†’ Obs)       â”‚   â”‚
â”‚  â”‚  - ë„êµ¬ ì‹¤í–‰ ê´€ë¦¬                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  registry.py (ë„êµ¬ ë“±ë¡ ì‹œìŠ¤í…œ)               â”‚   â”‚
â”‚  â”‚  - 8ê°œ ì „ë¬¸ ë„êµ¬ ë“±ë¡                         â”‚   â”‚
â”‚  â”‚  - ë„êµ¬ ìŠ¤í™ ì •ì˜                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  tools/ (ì‹¤í–‰ ë„êµ¬)                           â”‚   â”‚
â”‚  â”‚  - parse_upstage: ë¬¸ì„œ íŒŒì‹±                   â”‚   â”‚
â”‚  â”‚  - validate_rag: RAG ê¸°ë°˜ ê²€ì¦                â”‚   â”‚
â”‚  â”‚  - generate_solar: CTD ë¬¸ì„œ ìƒì„±              â”‚   â”‚
â”‚  â”‚  - save_pdf: PDF ë³€í™˜                         â”‚   â”‚
â”‚  â”‚  - generate_validation_report: ê²€ì¦ ë¦¬í¬íŠ¸    â”‚   â”‚
â”‚  â”‚  - ctdmate_pipeline: í†µí•© íŒŒì´í”„ë¼ì¸          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Upstage    â”‚    â”‚   Qdrant     â”‚
â”‚   API        â”‚    â”‚   Vector DB  â”‚
â”‚              â”‚    â”‚   (RAG)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### AI/ML
- **Llama 3.2-3B**: ReAct ì—ì´ì „íŠ¸ í”Œë˜ë„ˆ (ë¡œì»¬)
- **Solar Pro2**: CTD ë¬¸ì„œ ìƒì„± LLM (Upstage)
- **E5-Large**: ë‹¤êµ­ì–´ ì„ë² ë”© ëª¨ë¸ (RAG)

### Backend
- **Python 3.9+**: ì£¼ ê°œë°œ ì–¸ì–´
- **FastAPI**: ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬
- **LangChain**: LLM ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬
- **Qdrant**: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤

### External APIs
- **Upstage Document Parse API**: OCR ë° ë¬¸ì„œ êµ¬ì¡° íŒŒì‹±
- **Solar API**: ê³ ì„±ëŠ¥ LLM ê¸°ë°˜ ë¬¸ì„œ ìƒì„±

### Libraries
- **ReportLab**: PDF ìƒì„±
- **OpenPyXL**: Excel íŒŒì¼ ì²˜ë¦¬
- **PyYAML**: YAML íŒŒì‹±
- **python-dotenv**: í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
CTDMate/
â”œâ”€â”€ ctdmate/                    # ë©”ì¸ íŒ¨í‚¤ì§€
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ api.py              # FastAPI ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ router.py           # ë¼ìš°íŒ… ë° CTDAgent í˜¸ì¶œ
â”‚   â”‚   â”œâ”€â”€ config.py           # í™˜ê²½ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ fsm.py              # ìƒíƒœ ë¨¸ì‹ 
â”‚   â”‚   â””â”€â”€ prompts.py          # LLM í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ brain/
â”‚   â”‚   â””â”€â”€ router.py           # LLM ë¼ìš°í„°
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ smartdoc_upstage.py # Upstage íŒŒì‹± ë„êµ¬
â”‚   â”‚   â”œâ”€â”€ reg_rag.py          # RAG ê²€ì¦ ë„êµ¬
â”‚   â”‚   â””â”€â”€ gen_solar.py        # Solar ìƒì„± ë„êµ¬
â”‚   â”œâ”€â”€ rag/                    # RAG ê´€ë ¨ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ tests/                  # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚
â”œâ”€â”€ CTDAgent/                   # ReAct ì—ì´ì „íŠ¸ (ë…ë¦½ ëª¨ë“ˆ)
â”‚   â”œâ”€â”€ agent.py                # ReAct ì—ì´ì „íŠ¸ ë©”ì¸ ë¡œì§
â”‚   â”œâ”€â”€ registry.py             # ë„êµ¬ ë“±ë¡ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ settings.py             # ì—ì´ì „íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ tools/                  # 8ê°œ ì „ë¬¸ ë„êµ¬
â”‚   â”‚   â”œâ”€â”€ parse_upstage.py
â”‚   â”‚   â”œâ”€â”€ validate_rag.py
â”‚   â”‚   â”œâ”€â”€ generate_solar.py
â”‚   â”‚   â”œâ”€â”€ save_pdf.py
â”‚   â”‚   â”œâ”€â”€ ctdmate_pipeline.py
â”‚   â”‚   â””â”€â”€ generate_validation_report.py
â”‚   â”œâ”€â”€ fonts/                  # PDF í•œê¸€ í°íŠ¸
â”‚   â””â”€â”€ output/                 # ê²°ê³¼ ì €ì¥ í´ë”
â”‚
â”œâ”€â”€ static/                     # ì›¹ UI íŒŒì¼
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ uploads/                    # ì—…ë¡œë“œëœ íŒŒì¼
â”œâ”€â”€ output/                     # ìƒì„±ëœ ê²°ê³¼ë¬¼
â”œâ”€â”€ qdrant_storage/             # ë²¡í„° DB ì €ì¥ì†Œ
â”œâ”€â”€ requirements.txt            # Python ì˜ì¡´ì„±
â””â”€â”€ README.md                   # ì´ íŒŒì¼
```

---

## ğŸ”„ ì›Œí¬í”Œë¡œìš°

### ìƒì„± ëª¨ë“œ (Generate Mode)
Excel íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ CTD ë¬¸ì„œë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.

```
1. ì›¹ UIì—ì„œ Excel íŒŒì¼ ì—…ë¡œë“œ
   â†“
2. CTDMate ë¼ìš°í„°ê°€ íŒŒì¼ ì €ì¥
   â†“
3. CTDAgent ì‹¤í–‰
   - ëª¨ë“œ ê°ì§€: Excel ê°ì§€ â†’ ìƒì„± ëª¨ë“œ
   - Thought: "Excelì„ íŒŒì‹±í•´ì•¼ í•¨"
   - Action: parse_documents ì‹¤í–‰
   - Observation: íŒŒì‹± ì™„ë£Œ
   - Thought: "ê²€ì¦ì´ í•„ìš”í•¨"
   - Action: validate_excel ì‹¤í–‰
   - Observation: ê²€ì¦ ì™„ë£Œ
   - Thought: "CTD ëª¨ë“ˆì„ ìƒì„±í•´ì•¼ í•¨"
   - Action: generate_all_modules ì‹¤í–‰
   - Observation: 5ê°œ ëª¨ë“ˆ ìƒì„±
   - Thought: "PDFë¡œ ë³€í™˜ í•„ìš”"
   - Action: save_as_pdf ì‹¤í–‰
   - Observation: PDF ìƒì„± ì™„ë£Œ
   â†“
4. ê²°ê³¼ ë°˜í™˜ (PDF ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥)
```

**ê²°ê³¼**: `CTD_Module_2_3_4_5.pdf` (ì•½ 5ë¶„ ì†Œìš”)

### ê²€ì¦ ëª¨ë“œ (Validate Mode)
PDF íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ ICH ê·œì • ì¤€ìˆ˜ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.

```
1. ì›¹ UIì—ì„œ PDF íŒŒì¼ ì—…ë¡œë“œ
   â†“
2. CTDMate ë¼ìš°í„°ê°€ íŒŒì¼ ì €ì¥
   â†“
3. CTDAgent ì‹¤í–‰
   - ëª¨ë“œ ê°ì§€: PDF ê°ì§€ â†’ ê²€ì¦ ëª¨ë“œ
   - Thought: "PDFë¥¼ íŒŒì‹±í•´ì•¼ í•¨"
   - Action: parse_documents ì‹¤í–‰
   - Observation: íŒŒì‹± ì™„ë£Œ
   - Thought: "ê·œì • ì¤€ìˆ˜ë¥¼ ê²€ì¦í•´ì•¼ í•¨"
   - Action: generate_validation_report ì‹¤í–‰
   - Observation: ê²€ì¦ ì™„ë£Œ
   â†“
4. ê²°ê³¼ ë°˜í™˜ (ê²€ì¦ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥)
```

**ê²°ê³¼**: `validation_report.md` (ì•½ 3ë¶„ ì†Œìš”)
- í†µê³¼: 45ê°œ í•­ëª©
- ì‹¤íŒ¨: 3ê°œ í•­ëª© (ê°œì„  ê¶Œê³  í¬í•¨)
- ê²½ê³ : 7ê°œ í•­ëª©

---

  ### ğŸ¥ ì‹¤í–‰ ë°ëª¨

 **[ğŸ“¹ ì‹œì—° ì˜ìƒ ë‹¤ìš´ë¡œë“œ(34MB)](https://github.com/xodus123/CTDMate/raw/main/assets/demo.mp4)**

  _í´ë¦­í•˜ì—¬ ì˜ìƒ ë‹¤ìš´ë¡œë“œ í›„ ì¬ìƒí•˜ì„¸ìš”_

  > Excel ì—…ë¡œë“œë¶€í„° CTD ë¬¸ì„œ ìƒì„±ê¹Œì§€ ì „ ê³¼ì •

**ì£¼ìš” í™”ë©´:**
- PDF ë¬¸ì„œ íŒŒì‹±
- RAG ê¸°ë°˜ ê·œì • ì¤€ìˆ˜ ê²€ì¦
- CTD ìƒì„± ë° ë‹¤ìš´ë¡œë“œ

---

## ğŸ¯ í•µì‹¬ ê¸°ìˆ  êµ¬í˜„

### 1. ReAct ì—ì´ì „íŠ¸ íŒ¨í„´

**ìœ„ì¹˜**: `CTDAgent/agent.py`

```python
for step in range(1, max_steps + 1):
    # LLMì´ ë‹¤ìŒ í–‰ë™ ê²°ì •
    ai_response = llama.invoke(history)

    # Thought ì¶”ì¶œ
    thought = extract_thought(ai_response)
    log.info(f"ğŸ’­ THOUGHT: {thought}")

    # Action ì¶”ì¶œ ë° ì‹¤í–‰
    tool_call = extract_tool_call(ai_response)
    log.info(f"âš¡ ACTION: {tool_call}")
    result = run_tool(tool_call)

    # Observation ìƒì„±
    observation = f"Observation: {result}"
    log.info(f"ğŸ“ OBSERVATION: {observation}")
    history.append(observation)

    # ì™„ë£Œ ì¡°ê±´ ì²´í¬
    if "FinalAnswer" in ai_response:
        break
```

### 2. ìë™ ëª¨ë“œ ê°ì§€

**ìœ„ì¹˜**: `CTDAgent/agent.py:_detect_mode()`

```python
def _detect_mode(file_paths, texts, llama):
    # 1ë‹¨ê³„: íŒŒì¼ëª… í‚¤ì›Œë“œ
    for path in file_paths:
        if any(kw in path for kw in ["final", "CTD", "ì™„ì„±"]):
            return "validate"
        if any(kw in path for kw in ["data", "ì‹¤í—˜", "draft"]):
            return "generate"

    # 2ë‹¨ê³„: íŒŒì¼ ë‚´ìš© ë¶„ì„
    for text in texts:
        text_lower = text.lower()
        validate_kw = ["ctd", "êµ­ì œê³µí†µê¸°ìˆ ë¬¸ì„œ", "ëª©ì°¨", "1ë¶€", "2ë¶€", "3ë¶€"]
        if any(kw in text_lower for kw in validate_kw):
            return "validate"

    # 3ë‹¨ê³„: í™•ì¥ì ê¸°ë°˜
    if path.endswith(".pdf"):
        return "validate"  # ì™„ì„±ëœ ë¬¸ì„œ
    if path.endswith((".xlsx", ".csv")):
        return "generate"  # ì›ì‹œ ë°ì´í„°

    # 4ë‹¨ê³„: LLM ë¶„ì„ (ë¶ˆí™•ì‹¤í•œ ê²½ìš°ë§Œ)
    return llama_analyze(file_paths, texts)
```

### 3. RAG ê¸°ë°˜ ê·œì • ê²€ì¦

**ìœ„ì¹˜**: `ctdmate/tools/reg_rag.py`

```python
# ICH ê·œì • ë¬¸ì„œë¥¼ ë²¡í„° DBì— ì €ì¥
qdrant_client.upsert(
    collection_name="ctd",
    points=embedded_documents
)

# ì—…ë¡œë“œëœ ë¬¸ì„œì™€ ìœ ì‚¬ë„ ê²€ìƒ‰
results = qdrant_client.search(
    collection_name="ctd",
    query_vector=embed(user_content),
    limit=TOP_K
)

# ê·œì • ìœ„ë°˜ ì‚¬í•­ íŒë‹¨
violations = []
for doc in user_docs:
    if similarity < THRESHOLD:
        violations.append(doc)
```

### 4. ëª¨ë“ˆì‹ ë„êµ¬ ì‹œìŠ¤í…œ

**ìœ„ì¹˜**: `CTDAgent/registry.py`

```python
# ë„êµ¬ ë“±ë¡
TOOLS["parse_documents"] = parse_documents
TOOL_SPEC["parse_documents"] = {
    "args": {"file_paths": "list[str]"},
    "desc": "Upstage APIë¡œ ë¬¸ì„œ íŒŒì‹±"
}

# ì—ì´ì „íŠ¸ì—ì„œ ìë™ ì‚¬ìš©
tool = TOOLS[tool_name]
result = tool(args)
```

---

## ğŸ“Š í”„ë¡œì íŠ¸ ì„±ê³¼

- âœ¨ ReAct íŒ¨í„´ êµ¬í˜„ 
- ğŸ”— RAG ì‹œìŠ¤í…œìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ
- ğŸ§© ëª¨ë“ˆì‹ ì•„í‚¤í…ì²˜ë¡œ í™•ì¥ì„± í™•ë³´
- ğŸ¤– ìë™ ëª¨ë“œ ê°ì§€ë¡œ UX ê°œì„ 

---

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

- [ìƒì„¸ í¬íŠ¸í´ë¦¬ì˜¤](PORTFOLIO.md) - ê¸°ìˆ  êµ¬í˜„ ìƒì„¸ ì„¤ëª…
- [ì‹œìŠ¤í…œ êµ¬ì¡°](Architecture_final3.md) - ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

---

## ğŸ¤ ê¸°ì—¬

ì´ í”„ë¡œì íŠ¸ëŠ” êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.
ê¸°ì—¬ë¥¼ ì›í•˜ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•˜ê±°ë‚˜ Pull Requestë¥¼ ë³´ë‚´ì£¼ì„¸ìš”.

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

Educational Use Only

---

## ğŸ™ ê°ì‚¬ì˜ ë§

- **Upstage**: Document Parse API ë° Solar LLM ì œê³µ
- **LangChain**: LLM ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬
- **Meta**: Llama 3.2 ëª¨ë¸
- **Qdrant**: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤

---

